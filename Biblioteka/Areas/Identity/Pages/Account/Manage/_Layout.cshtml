@inject UserManager<BibUser> UserManager

@{
    if (ViewData.TryGetValue("ParentLayout", out var parentLayout) && parentLayout !=  null)
    {
        Layout = parentLayout.ToString();
    }
    else
    {
        Layout = "/Areas/Identity/Pages/_Layout.cshtml";
    }
}
<div class="main_container">
    <div class="profile">
        <div class="left_profile_div">
            <div class="profile_photo">
                <a asp-page="./changeProfPic">
                    @if (UserManager.FindByEmailAsync(User.Identity.Name).Result.profilePicData != null)
                    {
                        <img src="data:image/jpg;base64,@(Convert.ToBase64String(UserManager.FindByEmailAsync(User.Identity.Name).Result.profilePicData))" alt="~/images/user_photo.jpg" />
					    <i class="fa-solid fa-pen-to-square"></i>
                    }
                    else
                    {
                        <img src="~/images/user_photo.jpg" alt="~/images/user_photo.jpg" />
                        <i class="fa-solid fa-pen-to-square"></i>
                        <h1>@User.Identity.Name</h1>
                        <h1>@UserManager.FindByEmailAsync(User.Identity.Name).Result.</h1>
                    }
                </a>
            </div>
            <div class="profile_options">
                <partial name="_ManageNav" />
            </div>
        </div>   
        <div class="main_profile_details">
              @RenderBody()
        </div>
    </div>
</div>


@section Scripts {
    @RenderSection("Scripts", required: false)
}
